<?xml version="1.0" encoding="UTF-8"?>
<!--
    Licensed Material - Property of IBM

   © Copyright 2015 IBM Corp.

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0"
        xmlns:rim="http://www.blackberry.com/ns/widgets"
        xmlns:android="http://schemas.android.com/apk/res/android"
        id="cordova-plugin-mfp"
        version="8.0.201601221951">
    <name>IBM MobileFirst Platform Foundation</name>
    <description>IBM MobileFirst Platform Foundation Cordova Plugin</description>
    <license>IBM</license>
    <keywords>cordova,ibm,worklight,mobilefirst,mfp</keywords>
    <issue>https://www.ibm.com/support</issue>

    <engines>
        <engine name="cordova-android" version=">=5.0.0 <6" />
        <engine name="cordova-ios" version=">=4.0.0 <5" />
        <engine name="cordova-windows" version=">=4.1.0 <5" />
        <engine name="cordova-plugman" version=">=5.3.0 <7" />
    </engines>

    <hook type="before_prepare" src="hooks/bootstrap.js" />
    <hook type="after_prepare" src="hooks/bootstrap.js" />
    <hook type="before_plugin_uninstall" src="hooks/bootstrap.js" />
    <hook type="after_plugin_install" src="hooks/bootstrap.js" />

    <dependency id="cordova-plugin-device" version=">=1.0.1" />
    <dependency id="cordova-plugin-dialogs" version=">=1.1.1" />
    <dependency id="cordova-plugin-globalization" version=">=1.0.1" />

    <platform name="android">
        <dependency id="cordova-plugin-okhttp" version=">=2.0.0" />

        <js-module src="bootstrap.js" name="mfp">
            <runs/>
        </js-module>

        <framework src="src/android/build-extras.gradle" custom="true" type="gradleReference" />

        <asset src="www/worklight" target="plugins/cordova-plugin-mfp/worklight" />
        <asset src="src/android/assets/www/worklight" target="plugins/cordova-plugin-mfp/worklight" />

        <config-file target="config.xml" parent="/*">
            <feature name="WLInitializationPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLInitializationPlugin" />
                <param name="onload" value="true" />
            </feature>
            <feature name="UserAuth">
                <param name="android-package" value="com.worklight.androidgap.plugin.UserAuthPlugin" />
            </feature>
            <feature name="LoggerPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.LoggerPlugin" />
            </feature>
            <feature name="WLApp">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLApp" />
            </feature>
            <feature name="NativePage">
                <param name="android-package" value="com.worklight.androidgap.plugin.NativePage" />
            </feature>
            <feature name="NativeBusyIndicator">
                <param name="android-package" value="com.worklight.androidgap.plugin.BusyIndicator" />
            </feature>
            <feature name="SecurityPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.SecurityPlugin" />
            </feature>
            <feature name="StoragePlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.StoragePlugin" />
            </feature>
            <feature name="Push">
                <param name="android-package" value="com.worklight.androidgap.plugin.Push" />
            </feature>
            <feature name="WebResourcesDownloader">
                <param name="android-package" value="com.worklight.androidgap.plugin.WebResourcesDownloaderPlugin" />
            </feature>
            <feature name="NetworkDetector">
                <param name="android-package" value="com.worklight.androidgap.plugin.NetworkDetector" />
            </feature>
            <feature name="DeviceAuth">
                <param name="android-package" value="com.worklight.androidgap.plugin.DeviceAuthPlugin" />
            </feature>
            <feature name="WifiPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WifiPlugin" />
            </feature>
            <feature name="WLGeolocationPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLGeolocationPlugin" />
            </feature>
            <feature name="ForegroundBinderPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.ForegroundBinderPlugin" />
            </feature>
            <feature name="FIPSHttpPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.FIPSHttpPlugin" />
            </feature>
            <feature name="WLCustomDialog">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLCustomDialog" />
            </feature>
            <feature name="NetworkStatus">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLNetworkManager" />
            </feature>
            <feature name="WLSplashScreen">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLSplashScreenPlugin" />
            </feature>
            <feature name="WLAuthorizationManagerPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLAuthorizationManagerPlugin" />
            </feature>
            <feature name="WLDirectUpdatePlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLDirectUpdatePlugin" />
            </feature>
            <feature name="WLNativeXHRPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLNativeXHRPlugin" />
            </feature>
            <feature name="WLActionSenderPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLActionSenderPlugin" />
            </feature>
            <feature name="WLTrusteer">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLTrusteerPlugin" />
            </feature>
            <feature name="WLCertificatePinningPlugin">
                <param name="android-package" value="com.worklight.androidgap.plugin.WLCertificatePinningPlugin" />
            </feature>
        </config-file>

        <config-file target="AndroidManifest.xml" parent="/manifest">
            <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
        </config-file>

        <lib-file src="src/android/libs/android-async-http.jar" />
        <lib-file src="src/android/libs/bcprov.jar" />
        <lib-file src="src/android/libs/commons-codec.jar" />
        <lib-file src="src/android/libs/guava.jar" />
        <lib-file src="src/android/libs/jackson-core-asl.jar" />
        <lib-file src="src/android/libs/jackson-mapper-asl.jar" />
        <lib-file src="src/android/libs/worklight-android.jar" />

        <!-- featurelibs/ contains libcrypto shared by fips and jsonstore, have it as common-->
        <resource-file src="src/android/assets/featurelibs/armeabi/libcrypto.so.1.0.0.zip" target="assets/featurelibs/armeabi/libcrypto.so.1.0.0.zip" />
        <resource-file src="src/android/assets/featurelibs/armeabi-v7a/libcrypto.so.1.0.0.zip" target="assets/featurelibs/armeabi-v7a/libcrypto.so.1.0.0.zip" />
        <resource-file src="src/android/assets/featurelibs/x86/libcrypto.so.1.0.0.zip" target="assets/featurelibs/x86/libcrypto.so.1.0.0.zip" />

        <resource-file src="src/android/libs/armeabi/libauthjni.so" target="libs/armeabi/libauthjni.so" />
        <resource-file src="src/android/libs/armeabi-v7a/libauthjni.so" target="libs/armeabi-v7a/libauthjni.so" />
        <resource-file src="src/android/libs/mips/libauthjni.so" target="libs/mips/libauthjni.so" />
        <resource-file src="src/android/libs/mips64/libauthjni.so" target="libs/mips64/libauthjni.so" />
        <resource-file src="src/android/libs/x86/libauthjni.so" target="libs/x86/libauthjni.so" />

        <resource-file src="src/android/res/drawable-hdpi/splash.9.png" target="res/drawable-hdpi/splash.9.png" />
        <resource-file src="src/android/res/drawable-ldpi/splash.9.png" target="res/drawable-ldpi/splash.9.png" />
        <resource-file src="src/android/res/drawable-mdpi/splash.9.png" target="res/drawable-mdpi/splash.9.png" />
        <resource-file src="src/android/res/drawable-xhdpi/splash.9.png" target="res/drawable-xhdpi/splash.9.png" />
        <resource-file src="src/android/res/drawable-xxhdpi/splash.9.png" target="res/drawable-xxhdpi/splash.9.png" />
        <resource-file src="src/android/res/drawable/push.png.wluser" target="res/drawable/push.png" />
        <resource-file src="src/android/res/drawable-hdpi/settings.png.wluser" target="res/drawable-hdpi/settings.png" />
        <resource-file src="src/android/res/drawable-hdpi/push.png.wluser" target="res/drawable-hdpi/push.png" />
        <resource-file src="src/android/res/drawable-hdpi-v11/push.png.wluser" target="res/drawable-hdpi-v11/push.png" />
        <resource-file src="src/android/res/drawable-ldpi/push.png.wluser" target="res/drawable-ldpi/push.png" />
        <resource-file src="src/android/res/drawable-ldpi/settings.png.wluser" target="res/drawable-ldpi/settings.png" />
        <resource-file src="src/android/res/drawable-ldpi-v11/push.png.wluser" target="res/drawable-ldpi-v11/push.png" />
        <resource-file src="src/android/res/drawable-mdpi/push.png.wluser" target="res/drawable-mdpi/push.png" />
        <resource-file src="src/android/res/drawable-mdpi/settings.png.wluser" target="res/drawable-mdpi/settings.png" />
        <resource-file src="src/android/res/drawable-mdpi-v11/push.png.wluser" target="res/drawable-mdpi-v11/push.png" />
        <resource-file src="src/android/res/drawable-xhdpi/push.png.wluser" target="res/drawable-xhdpi/push.png" />
        <resource-file src="src/android/res/drawable-xhdpi/settings.png.wluser" target="res/drawable-xhdpi/settings.png" />
        <resource-file src="src/android/res/drawable-xhdpi-v11/push.png.wluser" target="res/drawable-xhdpi-v11/push.png" />

        <resource-file src="src/android/res/values/mfp-strings.xml" target="res/values/mfp-strings.xml" />
        <resource-file src="src/android/res/values-de/mfp-strings.xml" target="res/values-de/mfp-strings.xml" />
        <resource-file src="src/android/res/values-es/mfp-strings.xml" target="res/values-es/mfp-strings.xml" />
        <resource-file src="src/android/res/values-fr/mfp-strings.xml" target="res/values-fr/mfp-strings.xml" />
        <resource-file src="src/android/res/values-he/mfp-strings.xml" target="res/values-he/mfp-strings.xml" />
        <resource-file src="src/android/res/values-it/mfp-strings.xml" target="res/values-it/mfp-strings.xml" />
        <resource-file src="src/android/res/values-iw/mfp-strings.xml" target="res/values-iw/mfp-strings.xml" />
        <resource-file src="src/android/res/values-ja/mfp-strings.xml" target="res/values-ja/mfp-strings.xml" />
        <resource-file src="src/android/res/values-ko/mfp-strings.xml" target="res/values-ko/mfp-strings.xml" />
        <resource-file src="src/android/res/values-pt-rBR/mfp-strings.xml" target="res/values-pt-rBR/mfp-strings.xml" />
        <resource-file src="src/android/res/values-ru/mfp-strings.xml" target="res/values-ru/mfp-strings.xml" />
        <resource-file src="src/android/res/values-zh/mfp-strings.xml" target="res/values-zh/mfp-strings.xml" />
        <resource-file src="src/android/res/values-zh-rTW/mfp-strings.xml" target="res/values-zh-rTW/mfp-strings.xml" />

        <resource-file src="src/android/.wldata" target=".wldata"/>
        <resource-file src="src/android/proguard-project.txt" target="proguard-project.txt"/>
    </platform>

    <platform name="ios">

        <js-module src="bootstrap.js" name="mfp">
            <runs/>
        </js-module>

        <asset src="www/worklight" target="plugins/cordova-plugin-mfp/worklight" />
        <asset src="src/ios/www/worklight" target="plugins/cordova-plugin-mfp/worklight" />

        <!-- TODO: remove this, these files should be replace from worklight project -->
        <config-file target="config.xml" parent="/*">
            <!--worklight-->
            <feature name="WLSplashScreen">
                <param name="ios-package" value="WLSplashPlugin" />
            </feature>
            <feature name="LoggerPlugin">
                <param name="ios-package" value="LoggerPlugin" />
            </feature>
            <feature name="DeviceAuth">
                <param name="ios-package" value="DeviceAuthPlugin" />
            </feature>
            <feature name="UserAuth">
                <param name="ios-package" value="UserAuthPlugin" />
            </feature>
            <feature name="WebResourcesDownloader">
                <param name="ios-package" value="WebResourcesDownloader" />
            </feature>
            <feature name="WLDirectUpdatePlugin">
                <param name="ios-package" value="WLDirectUpdatePlugin" />
            </feature>
            <feature name="WLNotification">
                <param name="ios-package" value="WLNotification" />
            </feature>
            <feature name="WLApp">
                <param name="ios-package" value="WLApp" />
                <param name="onload" value="true" />
            </feature>
            <feature name="UIControls">
                <param name="ios-package" value="UIControls" />
            </feature>
            <feature name="Push">
                <param name="ios-package" value="Push" />
                <param name="onload" value="true" />
            </feature>
            <feature name="NetworkDetector">
                <param name="ios-package" value="NetworkDetector" />
            </feature>
            <feature name="NativePage">
                <param name="ios-package" value="NativePage" />
            </feature>
            <feature name="SecurityPlugin">
                <param name="ios-package" value="SecurityPlugin" />
            </feature>
            <feature name="StoragePlugin">
                <param name="ios-package" value="StoragePlugin" />
            </feature>
            <feature name="FIPSHttpPlugin">
                <param name="ios-package" value="FIPSHttpPlugin" />
            </feature>
            <feature name="Badge">
                <param name="ios-package" value="Badge" />
            </feature>
            <feature name="NotificationEx">
                <param name="ios-package" value="NotificationEx" />
            </feature>
            <feature name="WifiPlugin">
                <param name="ios-package" value="WifiPlugin" />
            </feature>
            <feature name="CoreLocationGetLocationPlugin">
                <param name="ios-package" value="CoreLocationGetLocationPlugin" />
            </feature>
            <feature name="CoreLocationWatchPlugin">
                <param name="ios-package" value="CoreLocationWatchPlugin" />
            </feature>
            <feature name="SignificantChangeWatchPlugin">
                <param name="ios-package" value="SignificantChangeWatchPlugin" />
            </feature>
            <feature name="SignificantChangeGetLocationPlugin">
                <param name="ios-package" value="SignificantChangeGetLocationPlugin" />
            </feature>
            <feature name="WLNativeXHRPlugin">
                <param name="ios-package" value="WLNativeXHRPlugin" />
            </feature>
            <feature name="WLActionSenderPlugin">
                <param name="ios-package" value="WLActionSenderPlugin" />
            </feature>
            <feature name="WLTrusteer">
                <param name="ios-package" value="WLTrusteerPlugin" />
            </feature>
            <feature name="WLAuthorizationManagerPlugin">
                <param name="ios-package" value="WLAuthorizationManagerPlugin" />
            </feature>
            <feature name="WLCertificatePinningPlugin">
                <param name="ios-package" value="WLCertificatePinningPlugin" />
            </feature>
        </config-file>

        <framework src="src/ios/Frameworks/SQLCipher.framework" custom="true" />
        <framework src="src/ios/Frameworks/openssl.framework" custom="true" />
        <framework src="src/ios/Frameworks/IBMMobileFirstPlatformFoundationHybrid.framework" custom="true" />
        <framework src="src/ios/Frameworks/IBMMobileFirstPlatformFoundation.framework" custom="true" />
        <framework src="src/ios/Frameworks/IBMMobileFirstPlatformFoundationJSONStore.framework" custom="true" />

        <resource-file src="src/ios/Resources/Localizations.bundle" />

        <header-file src="src/ios/MFPAppDelegate.h" />
        <source-file src="src/ios/MFPAppDelegate.m" />

        <resource-file src="src/ios/Entitlements-Debug.plist" />
        <resource-file src="src/ios/Entitlements-Release.plist" />

        <framework src="libstdc++.6.dylib" />
        <framework src="libz.dylib" />
        <framework src="libc++.dylib" />
        <framework src="Security.framework" />
        <framework src="CoreData.framework" />
        <framework src="QuartzCore.framework" />
        <framework src="CoreLocation.framework" />
        <framework src="SystemConfiguration.framework" />

        <!-- TODO: for now only way to register the file with XCode, it can be done later with xcode node module from hook -->
        <resource-file src="src/ios/mfpclient.plist" />
        <resource-file src="src/ios/VERSION" />
    </platform>

    <platform name="windows">

        <js-module src="bootstrap.js" name="mfp">
            <runs/>
        </js-module>

        <asset src="www/worklight" target="plugins/cordova-plugin-mfp/worklight" />
        <asset src="src/windows/www/worklight" target="plugins/cordova-plugin-mfp/worklight" />

        <!-- hook scripts generate the wlclient.properties file -->
        <!-- <source-file src="src/windows/shared/wlclient.properties" target-dir="../../" /> -->

        <!-- TODO: Do these need to be included (all of them)? Ask India team -->
        <config-file target="config.xml" parent="/*">
            <feature name="DeviceInfo">
                <param name="wp-package" value="DeviceInfo" />
            </feature>
            <feature name="DeviceAuth">
                <param name="wp-package" value="DeviceAuth" />
            </feature>
            <feature name="Push">
                <param name="wp-package" value="Push" />
            </feature>
            <feature name="WifiPlugin">
                <param name="wp-package" value="WifiPlugin" />
            </feature>
            <feature name="WLApplicationBar">
                <param name="wp-package" value="WLApplicationBar" />
            </feature>
            <feature name="WLBusyIndicator">
                <param name="wp-package" value="WLBusyIndicator" />
            </feature>
            <feature name="WLCustomDialog">
                <param name="wp-package" value="WLCustomDialog" />
            </feature>
            <feature name="WLOpenURL">
                <param name="wp-package" value="WLOpenURL" />
            </feature>
            <feature name="WLGeolocationPlugin">
                <param name="wp-package" value="WLGeolocationPlugin" />
            </feature>
            <feature name="WLNativePage">
                    	<param name="wp-package" value="WLNativePage" />
            </feature>
            <feature name="StoragePlugin">
                    	<param name="wp-package" value="StoragePlugin" />
            </feature>
            <feature name="WLDirectUpdatePlugin">
                    	<param name="wp-package" value="WLDirectUpdatePlugin" />
            </feature>
            <feature name="Badge">
                    	<param name="wp-package" value="Badge" />
            </feature>
            <feature name="WLNativeXHRPlugin">
                    	<param name="wp-package" value="WLNativeXHRPlugin" />
            </feature>
            <feature name="WLActionSenderPlugin">
                    	<param name="wp-package" value="WLActionSenderPlugin" />
            </feature>
            <feature name="SecurityPlugin">
                    	<param name="wp-package" value="SecurityPlugin" />
            </feature>
            <feature name="WLSplashScreen">
                    	<param name="wp-package" value="WLSplashScreen" />
            </feature>
            <feature name="WLApp">
                    	<param name="wp-package" value="WLApp" />
            </feature>
            <feature name="WLAuthorizationManagerPlugin">
                    	<param name="wp-package" value="WLAuthorizationManagerPlugin" />
            </feature>
        </config-file>

        <!--
        <resource-file src="src/windows/images/logo.png" target="images/logo.png" />
        <resource-file src="src/windows/images/smalllogo.png" target="images/smalllogo.png" />
        <resource-file src="src/windows/images/storelogo.png" target="images/storelogo.png" />
        <resource-file src="src/windows/images/splashscreen.png" target="images/splashscreen.png" />
        -->

        <framework src="src/windows/shared/Newtonsoft.Json.dll" target="all" custom="true" />
        <framework src="src/windows/shared/SharpCompress.dll" target="all" custom="true" />
        <framework src="src/windows/shared/worklight-windows8.dll" target="all" custom="true" />

        <lib-file src="Microsoft.VCLibs, Version=12.0" target="win" arch="x86"/>
        <lib-file src="Microsoft.VCLibs, Version=12.0" target="win" arch="x64"/>
        <lib-file src="Microsoft.VCLibs, Version=12.0" target="win" arch="ARM"/>
        <lib-file src="Microsoft.VCLibs, Version=12.0" target="phone" arch="x86"/>
        <lib-file src="Microsoft.VCLibs, Version=12.0" target="phone" arch="ARM"/>

        <framework src="src/windows/buildtarget/x86/WLWin8Native.winmd" target="win"  target-dir="win/x86" custom="true" arch="x86" />
        <!--<framework src="src/windows/buildtarget/x86/AuthWinRT.winmd" target="win"  target-dir="win/x86" custom="true" arch="x86" />
        <resource-file src="src/windows/buildtarget/x86/AuthWinRT.dll" target="plugins/cordova-plugin-mfp/win/x86/AuthWinRT.dll" />-->

        <framework src="src/windows/buildtarget/x64/WLWin8Native.winmd" target="win"  target-dir="win/x64" custom="true" arch="x64" />
        <!--<framework src="src/windows/buildtarget/x64/AuthWinRT.winmd" target="win"  target-dir="win/x64" custom="true" arch="x64" />
        <resource-file src="src/windows/buildtarget/x64/AuthWinRT.dll" target="plugins/cordova-plugin-mfp/win/x64/AuthWinRT.dll" />-->

        <framework src="src/windows/buildtarget/ARM/WLWin8Native.winmd" target="win"  target-dir="win/ARM" custom="true" arch="ARM" />
        <!--<framework src="src/windows/buildtarget/ARM/AuthWinRT.winmd" target="win"  target-dir="win/ARM" custom="true" arch="ARM" />
        <resource-file src="src/windows/buildtarget/ARM/AuthWinRT.winmd" target="plugins/cordova-plugin-mfp/win/ARM/AuthWinRT.winmd" />-->

        <framework src="src/windows/buildtarget/wp/x86/WLWin8Native.winmd" target="phone"  target-dir="phone/x86" custom="true" arch="x86" />
        <!--<framework src="src/windows/buildtarget/wp/x86/AuthWinRTwp.winmd" target="phone"  target-dir="phone/x86" custom="true" arch="x86" />
        <resource-file src="src/windows/buildtarget/wp/x86/AuthWinRTwp.dll" target="plugins/cordova-plugin-mfp/phone/x86/AuthWinRTwp.dll" />-->

        <framework src="src/windows/buildtarget/wp/ARM/WLWin8Native.winmd" target="phone"  target-dir="phone/ARM" custom="true" arch="ARM" />
        <!--<framework src="src/windows/buildtarget/wp/ARM/AuthWinRTwp.winmd" target="phone"  target-dir="phone/ARM" custom="true" arch="ARM" />
        <resource-file src="src/windows/buildtarget/wp/ARM/AuthWinRTwp.dll" target="plugins/cordova-plugin-mfp/phone/ARM/AuthWinRTwp.dll" />-->

        <!--<framework src="src/windows/shared/AuthWinRT.targets" target="all" custom="true" />-->

        <resource-file src="src/windows/shared/AuthWinRT.targets" target="AuthWinRT.targets"/>
        <resource-file src="src/windows/.wldata" target=".wldata"/>
        <resource-file src="src/windows/shared/mfpclient.properties" target="mfpclient.properties"/>
    </platform>

</plugin>
